# 2.6 해상도와 DOF — Rayleigh 방정식

## 이 챕터에서 배우는 것
- Rayleigh 방정식의 물리적 의미 — 해상도의 근본 한계
- 초점 심도(DOF)란 무엇이며 왜 중요한지
- 해상도와 DOF의 트레이드오프 관계
- k₁ 계수의 의미와 역사적 변화
- 공정 윈도우(Process Window)의 개념
- AI 관점에서 Focus/Dose 데이터 활용

---

## Rayleigh 방정식: 포토리소그래피의 헌법

2.3장에서 Rayleigh 방정식을 처음 소개했다. 이제 이 방정식의 물리적 의미를 완전히 이해할 때가 되었다. 포토리소그래피의 모든 기술 발전 — 광원 교체, 침수 리소, OPC, 멀티 패터닝, EUV — 은 결국 이 **두 개의 방정식**이 정하는 한계를 극복하기 위한 것이다. 이 방정식들은 포토리소그래피의 "헌법"이다 — 어떤 기술을 도입하든, 이 헌법의 테두리 안에서 움직여야 한다.

### 해상도 (Resolution)

```
R = k₁ × λ / NA
```

### 초점 심도 (Depth of Focus, DOF)

```
DOF = k₂ × λ / NA²
```

여기서 R은 만들 수 있는 최소 패턴 크기(Half-Pitch 기준), DOF는 허용 가능한 초점 오차 범위, λ는 광원 파장, NA는 렌즈 개구수, k₁과 k₂는 공정 조건에 따라 달라지는 공정 계수다.

---

## 왜 빛으로 무한히 작은 패턴을 만들 수 없는가

### 회절: 빛이 돌아가는 성질

빛은 **파동(Wave)**이다. 파동에는 피할 수 없는 근본적 성질이 있다 — **회절(Diffraction)**. 빛이 장애물(마스크의 패턴 가장자리)을 만나면 직진하지 않고 **옆으로 퍼진다.** 마스크에 칼로 자른 듯 날카로운 경계가 있더라도, 웨이퍼에 도달하는 빛은 그 경계가 **흐릿하게** 번져 있다.

패턴이 클 때는 이 번짐이 패턴 크기에 비해 미미하므로 무시할 수 있다. 하지만 패턴이 작아질수록 번짐의 영향이 상대적으로 커지고, 어느 시점에서는 인접한 두 패턴의 번진 빛이 서로 겹쳐 **두 패턴을 구분할 수 없게** 된다. 이 한계가 Rayleigh 해상도다.

이미지 처리에 익숙한 분들에게는 이런 비유가 와닿을 것이다. 해상도가 낮은 이미지를 확대하면 인접한 픽셀이 뭉개져서 미세한 디테일을 구분할 수 없다. 빛의 파장이 이 "픽셀 크기"에 해당하는 것이다. 파장보다 작은 디테일은 빛으로 전달할 수 없다 — 이것이 **회절 한계(Diffraction Limit)**이며, 포토리소그래피뿐 아니라 모든 광학 시스템에 적용되는 물리적 법칙이다.

### 구체적 수치로 체감하기

ArF 침수 스캐너(λ=193nm, NA=1.35)에서의 해상도를 계산해 보자.

```
R = k₁ × 193/1.35 = k₁ × 143nm
```

k₁ = 0.5(전통적 한계)이면 R ≈ 71.5nm이다. k₁ = 0.3(공격적인 RET 적용)이면 R ≈ 43nm. k₁ = 0.28(실용 한계)이면 R ≈ 40nm. 단일 노광으로 ArF-i가 도달할 수 있는 최소 패턴은 약 38~40nm인 것이다. 7nm 공정에서 실제 최소 피치가 ~36nm라면, ArF-i 단일 노광으로는 부족하고 **멀티 패터닝(2.13장)**이 필수적으로 투입되어야 한다.

EUV 스캐너(λ=13.5nm, NA=0.33)에서는 어떤가?

```
R = k₁ × 13.5/0.33 = k₁ × 40.9nm
```

k₁ = 0.5이면 R ≈ 20.5nm, k₁ = 0.3이면 R ≈ 12.3nm. 파장이 14배 짧아졌으니 해상도가 극적으로 향상된다. EUV가 단일 노광으로 ArF-i 멀티 패터닝이 필요했던 영역을 커버하고도 남는 것이다. 하지만 NA가 0.33으로 ArF-i의 1.35에 비해 매우 낮은데, 이것은 DOF와 관련이 있다.

---

## 초점 심도 (DOF): 해상도만큼 중요하지만 덜 주목받는 것

### DOF란 무엇인가


![초점 심도(DOF) 개념도](/content/images/02_06/dof_concept_diagram.svg)

**DOF(Depth of Focus, 초점 심도)**는 노광 시 **허용 가능한 초점 오차 범위**다. 웨이퍼 표면이 렌즈의 초점면(Best Focus)에서 DOF 이내에 있어야 패턴이 정상적으로 전사된다. DOF 밖으로 벗어나면 패턴이 흐려지거나(선폭 증가), 비대칭이 되거나(사이드월 각도 변화), 아예 전사되지 않는다.

카메라로 비유하면, DOF는 **피사계 심도(Depth of Field)**와 같다. 렌즈 조리개를 크게 열면(NA가 높으면) 배경이 흐려지는데, 이것은 초점이 맞는 범위(피사계 심도)가 좁아진다는 뜻이다. 조리개가 작으면(NA가 낮으면) 전체가 선명하지만 빛이 적게 들어온다. 포토리소그래피도 정확히 같은 물리다 — NA를 높여 해상도를 올리면 DOF가 줄어들고, 웨이퍼 표면의 높낮이 변동에 대한 허용치가 좁아진다.

### DOF가 중요한 이유: 웨이퍼는 완벽히 평평하지 않다

1.2장에서 웨이퍼 제조를 다룰 때, 웨이퍼의 전체적 평탄도(TTV, Total Thickness Variation)와 국부적 평탄도(LFT, Local Flatness)를 언급했다. 아무리 정밀하게 제조해도 웨이퍼에는 수 μm 수준의 **휨(Warp/Bow)**이 존재한다. 거기에 더해, 전공정을 거치면서 증착/CMP/식각이 반복되어 표면에 **국부적 단차(Topography)**가 생긴다. 하나의 노광 필드(26×33mm) 안에서도 표면 높이가 수십~수백 nm 변동할 수 있다.

이 모든 높낮이 변동이 DOF **이내**여야 패턴이 정상적으로 형성된다. 최신 ArF-i 스캐너의 DOF가 약 100~150nm인데, 웨이퍼의 높이 변동이 수백 nm라면? 스캐너의 레벨링 시스템이 실시간으로 웨이퍼 높이를 측정하고 스테이지 Z축을 조정하여 보상한다. 하지만 보상할 수 없는 잔류 변동이 DOF를 넘으면 디포커스(Defocus)가 발생하여 CD 이상으로 나타난다.

### 해상도-DOF 트레이드오프: 미세화의 근본 딜레마


![NA vs 해상도 vs DOF 트레이드오프](/content/images/02_06/na_resolution_dof_tradeoff.png)

두 방정식을 다시 보자.

```
R   ∝ λ / NA      → NA를 높이면 R 개선 (좋다)
DOF ∝ λ / NA²     → NA를 높이면 DOF 급격히 악화 (나쁘다)
```

NA를 2배로 높이면, 해상도는 2배 향상되지만 DOF는 **4배 감소**한다. 해상도가 선형으로 좋아지는 동안 DOF는 제곱으로 나빠지는 것이다. 이것이 단순히 NA를 올리는 것만으로는 미세화를 달성할 수 없는 **근본적 이유**다. NA를 올려 해상도를 확보하면, 초점 관리가 극도로 어려워져 양산 안정성이 무너진다.

이 딜레마가 반도체 업계에 끊임없는 혁신을 요구해왔다. 침수 리소그래피(NA를 올리되 물의 굴절률로 DOF 감소를 일부 보상), PSM(k₁을 줄여 NA 증가 없이 해상도 확보), OPC(패턴 왜곡을 사전 보정), 그리고 궁극적으로 EUV(파장을 14배 줄여 같은 NA에서 해상도와 DOF 모두 향상) — 각 혁신은 이 트레이드오프의 다른 축을 공략한 것이다.

---

## k₁ 계수: 숫자 하나에 담긴 30년의 기술 진보

k₁은 단순한 상수가 아니다. 광원 형태, 마스크 타입, 레지스트 성능, OPC 보정, 각종 RET 기법 — **30년 동안 축적된 공정 기술의 총체**가 이 하나의 숫자에 압축되어 있다.

| 시대 | k₁ | 주요 기술 |
|:---|:---|:---|
| 1990s | 0.7~0.8 | 단순 이진 마스크, 전통 조명 |
| 2000s | 0.5~0.6 | OPC, PSM, Off-Axis 조명 |
| 2010s | 0.3~0.4 | 고급 OPC, 소스-마스크 최적화(SMO) |
| 현재 | ~0.28 | 극한 RET, 역설계 리소(ILT) |

0.7에서 0.28로 — 겉보기에 숫자 하나가 줄어든 것이지만, 이 변화의 이면에는 수조 원의 R&D 투자, 수만 명의 엔지니어의 노력, OPC에서 PSM을 거쳐 ILT에 이르는 기술 혁신의 역사가 있다. k₁이 0.01 줄어들 때마다, 그것을 가능하게 하는 데 필요한 기술적 도약은 점점 더 커졌다.

**이론적 최소값은 k₁ = 0.25**다. 이것은 수학적(푸리에 광학)으로, 단일 노광에서 0차와 1차 회절 차수(Diffraction Order)가 최소한 렌즈에 들어와야 패턴이 형성된다는 조건에서 도출된다. k₁ < 0.25는 단일 노광으로는 **물리적으로 불가능**하다. 이 벽을 넘기 위해 2.13장의 **멀티 패터닝** — 여러 번 노광하여 한 번에는 불가능한 미세 패턴을 실현하는 기법 — 이 등장했다.

---

## 공정 윈도우 (Process Window): 양산의 진짜 전장

### Dose-Focus 공간


![공정 윈도우 (Dose-Focus 타원)](/content/images/02_06/process_window_dose_focus.png)

이론적 해상도를 달성하는 것과 그것을 **양산에서 안정적으로 반복**하는 것은 완전히 다른 문제다. 연구실에서 한 번 찍어본 최고 해상도는 의미가 없다. 수만 장의 웨이퍼에서, 모든 다이에서, 일관되게 규격 내 CD를 달성해야 한다.

포토리소그래피에서 CD에 가장 큰 영향을 미치는 두 파라미터는 **Dose(노광 에너지, mJ/cm²)**와 **Focus(초점 위치, nm)**다. 이 두 파라미터의 2D 공간에서 CD가 허용 범위 내에 드는 영역을 **공정 윈도우(Process Window)**라 한다.

공정 윈도우는 보통 타원형으로 나타난다. 타원의 가로 폭이 **DOF(허용 Focus 범위)**, 세로 폭이 **EL(Exposure Latitude, 허용 Dose 범위, 보통 ±10% 이상이 목표)**이다. 이 타원이 넓을수록 **양산 안정성**이 높다 — 장비 변동, 웨이퍼 변동, 환경 변동이 있어도 CD가 규격 내에 유지되기 때문이다. 타원이 좁으면, 조금만 조건이 벗어나도 CD가 규격 밖으로 나가 불량이 된다.

공정이 미세해질수록 이 타원이 **점점 작아진다**. 이것이 첨단 공정에서 양산이 어려운 근본적 이유 중 하나다. 마진이 줄어들수록, 공정 조건의 **모든** 변동 요인을 더 정밀하게 제어해야 하고, 그것이 불가능한 영역은 AI로 예측/보정해야 한다.

### 보스도르샤 곡선 (Bossung Curve)


![Bossung 곡선 (Focus vs CD)](/content/images/02_06/bossung_curve.png)

Focus를 가로축, CD를 세로축으로 놓고 Dose별로 곡선을 그리면 **포물선(U자 또는 역U자)** 형태가 나타난다. 이것을 **보스도르샤 곡선(Bossung Curve)**이라 한다. 미국의 존 보스(John Bossung)이 1977년에 제안한 이 분석법은 50년이 지난 지금도 포토리소그래피 엔지니어의 기본 도구다.

Dense(조밀) 패턴에서는 역U자 — Best Focus에서 CD가 최대이고 양쪽으로 갈수록 줄어드는 형태, Isolated(고립) 패턴에서는 U자 — Best Focus에서 CD가 최소이고 양쪽으로 갈수록 커지는 형태가 나타난다. 이 곡선의 대칭성, 기울기, 꼭지점 위치를 분석하면 공정의 안정성과 Best Focus 위치, 그리고 Dose-Focus 간의 상호작용을 정량적으로 파악할 수 있다.

---

## AI 엔지니어에게 이것이 의미하는 것

Focus와 Dose 데이터는 포토리소그래피 AI의 **가장 기본적이면서도 가장 중요한** 입력이다.

스캐너 로그에서는 매 노광 필드(다이)마다 **Dose 설정값, Focus 측정/보정값, 레벨링 데이터(웨이퍼 높이 맵)**가 기록된다. CD-SEM이나 OCD(Scatterometry) 측정은 실제 CD 결과를 제공한다. 이 두 데이터를 연결하면 Focus/Dose → CD의 인과 모델을 구축할 수 있다.

대표적 AI 활용 사례를 살펴보자. **Focus 예측/보정** — 웨이퍼 형상 데이터(레벨링)와 이전 공정의 단차(Topography) 정보로 다이별/필드별 Focus 오프셋을 예측하여 실시간 보정한다. **Dose 보정** — 레지스트 두께 맵, 이전 층 CD 정보를 기반으로 다이별 Dose를 미세 조정한다. **공정 윈도우 최적화** — 다변량 데이터 분석으로 최적의 Dose/Focus 조합을 탐색한다. **디포커스 탐지** — CD 데이터의 공간 패턴에서 Focus 이탈 징후를 조기에 감지한다.

여기서 AI 모델링의 핵심 도전이 있다. Focus와 Dose가 **서로 교락(Confounding)**되어 있다는 것이다. CD가 변했을 때, 그것이 Focus가 벗어났기 때문인지 Dose가 틀렸기 때문인지, 단일 CD 측정만으로는 구분할 수 없다. Bossung 곡선에서 보듯, Focus와 Dose 모두 CD에 영향을 미치며 그 효과가 비선형적으로 얽혀 있다. AI 모델이 이 두 변수의 효과를 **디커플링(Decoupling)** — 분리하여 각각의 기여를 추정하는 것 — 이 핵심 기술이며, 이는 4장의 피처 엔지니어링에서 깊이 다룬다.

---

## 핵심 정리

포토리소그래피의 해상도(R = k₁λ/NA)와 초점 심도(DOF = k₂λ/NA²)는 Rayleigh 방정식이 정하는 물리적 한계 안에서 움직인다. 해상도를 높이기 위해 **NA를 올리면 DOF가 제곱으로 감소**하는 근본적 트레이드오프가 존재하며, 이것이 침수 리소, PSM, OPC, EUV 등 수많은 혁신을 촉발한 원동력이다. k₁은 공정 기술의 총체를 반영하는 계수로, 30년간 0.7에서 0.28까지 낮아졌으며 이론적 단일 노광 한계는 0.25다. **공정 윈도우**는 Dose-Focus 공간에서 양산 안정성의 실질적 척도이며, 공정이 미세해질수록 좁아진다. AI 엔지니어에게 Focus/Dose 데이터는 핵심 입력이며, 두 변수의 **교락 효과를 디커플링**하여 각각의 기여를 분리하는 것이 모델링의 핵심 과제다.

---

*다음 챕터: 2.7 OPC와 RET — 광근접 효과 보정*
