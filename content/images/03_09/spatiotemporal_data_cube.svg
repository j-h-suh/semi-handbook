<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700" width="900" height="700">
  <defs>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&amp;display=swap');
      text { font-family: 'Noto Sans KR', 'Apple SD Gothic Neo', sans-serif; }
    </style>
    <linearGradient id="cubeTop" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#D6EAF8" stop-opacity="0.6"/>
      <stop offset="100%" stop-color="#AED6F1" stop-opacity="0.4"/>
    </linearGradient>
    <linearGradient id="cubeRight" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#D5F5E3" stop-opacity="0.5"/>
      <stop offset="100%" stop-color="#A9DFBF" stop-opacity="0.3"/>
    </linearGradient>
    <linearGradient id="cubeFront" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#FADBD8" stop-opacity="0.5"/>
      <stop offset="100%" stop-color="#F5B7B1" stop-opacity="0.3"/>
    </linearGradient>
    <!-- Wafer heatmap gradients -->
    <radialGradient id="heatmap1" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#E74C3C" stop-opacity="0.7"/>
      <stop offset="60%" stop-color="#F39C12" stop-opacity="0.5"/>
      <stop offset="100%" stop-color="#3498DB" stop-opacity="0.4"/>
    </radialGradient>
    <radialGradient id="heatmap2" cx="45%" cy="55%" r="50%">
      <stop offset="0%" stop-color="#E74C3C" stop-opacity="0.6"/>
      <stop offset="50%" stop-color="#F1C40F" stop-opacity="0.5"/>
      <stop offset="100%" stop-color="#3498DB" stop-opacity="0.3"/>
    </radialGradient>
    <radialGradient id="heatmap3" cx="55%" cy="45%" r="50%">
      <stop offset="0%" stop-color="#E74C3C" stop-opacity="0.8"/>
      <stop offset="40%" stop-color="#F39C12" stop-opacity="0.5"/>
      <stop offset="100%" stop-color="#2ECC71" stop-opacity="0.3"/>
    </radialGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="110%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#E74C3C" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="700" fill="#FFFFFF"/>

  <!-- ===== ISOMETRIC 3D CUBE ===== -->
  <!-- Cube parameters: center ~(400, 310), edges ~200px -->
  <!-- Isometric projection angles -->

  <!-- BACK FACE (left side of cube) -->
  <polygon points="240,200 400,120 400,420 240,500" fill="url(#cubeFront)" stroke="#2C3E50" stroke-width="2"/>

  <!-- BACK FACE (right side) -->
  <polygon points="400,120 580,200 580,500 400,420" fill="url(#cubeRight)" stroke="#2C3E50" stroke-width="2"/>

  <!-- TOP FACE -->
  <polygon points="240,200 400,120 580,200 420,280" fill="url(#cubeTop)" stroke="#2C3E50" stroke-width="2"/>

  <!-- FRONT LEFT EDGE -->
  <line x1="240" y1="200" x2="240" y2="500" stroke="#2C3E50" stroke-width="2.5"/>

  <!-- FRONT BOTTOM EDGE LEFT -->
  <line x1="240" y1="500" x2="400" y2="420" stroke="#2C3E50" stroke-width="2"/>

  <!-- FRONT BOTTOM EDGE RIGHT -->
  <line x1="400" y1="420" x2="580" y2="500" stroke="#2C3E50" stroke-width="2.5"/>

  <!-- FRONT RIGHT EDGE -->
  <line x1="580" y1="200" x2="580" y2="500" stroke="#2C3E50" stroke-width="2.5"/>

  <!-- Hidden front vertical edge -->
  <line x1="420" y1="280" x2="420" y2="580" stroke="#2C3E50" stroke-width="1.5" stroke-dasharray="5,5" opacity="0.3"/>

  <!-- ===== WAFER SLICES INSIDE CUBE (stacked ellipses) ===== -->
  <!-- Bottom slice (Lot 1 - past) -->
  <ellipse cx="390" cy="440" rx="60" ry="25" fill="url(#heatmap1)" stroke="#2C3E50" stroke-width="1" opacity="0.7"/>
  <text x="460" y="445" font-size="8" fill="#7F8C8D">Lot 1</text>

  <!-- Middle slice -->
  <ellipse cx="380" cy="380" rx="60" ry="25" fill="url(#heatmap2)" stroke="#2C3E50" stroke-width="1" opacity="0.7"/>

  <!-- Middle-upper slice -->
  <ellipse cx="370" cy="320" rx="60" ry="25" fill="url(#heatmap3)" stroke="#2C3E50" stroke-width="1" opacity="0.8"/>

  <!-- Top slice (Lot N - present) -->
  <ellipse cx="360" cy="260" rx="60" ry="25" fill="url(#heatmap1)" stroke="#2C3E50" stroke-width="1.5" opacity="0.9"/>
  <text x="300" y="255" font-size="8" fill="#7F8C8D">Lot N</text>

  <!-- Upward arrow between slices -->
  <line x1="405" y1="430" x2="375" y2="275" stroke="#E74C3C" stroke-width="1.5" stroke-dasharray="4,3" opacity="0.5"/>
  <polygon points="373,280 370,268 380,278" fill="#E74C3C" opacity="0.6"/>

  <!-- ===== AXIS LABELS ===== -->
  <!-- Z-axis (Time) - along left edge going up -->
  <line x1="220" y1="490" x2="220" y2="210" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowRed)"/>
  <text x="200" y="350" font-size="11" fill="#E74C3C" font-weight="bold" transform="rotate(-90,200,350)" text-anchor="middle">시간 (로트/웨이퍼 순서)</text>

  <!-- X-axis - along bottom-left edge -->
  <text x="310" y="475" font-size="10" fill="#3498DB" font-weight="bold" transform="rotate(-25,310,475)" text-anchor="middle">웨이퍼 X 좌표 (mm)</text>

  <!-- Y-axis - along bottom-right edge -->
  <text x="500" y="475" font-size="10" fill="#2ECC71" font-weight="bold" transform="rotate(25,500,475)" text-anchor="middle">웨이퍼 Y 좌표 (mm)</text>

  <!-- ===== SLICE ANNOTATIONS (cut planes) ===== -->

  <!-- TIME SLICE (horizontal cut) - wafer map -->
  <g opacity="0.85">
    <line x1="460" y1="320" x2="620" y2="260" stroke="#3498DB" stroke-width="1.5" stroke-dasharray="6,3"/>
    <rect x="620" y="238" width="110" height="50" rx="8" fill="#D6EAF8" stroke="#3498DB" stroke-width="1.5" filter="url(#shadow)"/>
    <text x="675" y="256" font-size="11" fill="#2C3E50" font-weight="bold" text-anchor="middle">웨이퍼맵</text>
    <text x="675" y="274" font-size="10" fill="#3498DB" text-anchor="middle">→ 3.7장</text>
  </g>

  <!-- SPATIAL SLICE (vertical cut) - SPC chart -->
  <g opacity="0.85">
    <line x1="350" y1="440" x2="190" y2="530" stroke="#E74C3C" stroke-width="1.5" stroke-dasharray="6,3"/>
    <rect x="120" y="530" width="120" height="50" rx="8" fill="#FADBD8" stroke="#E74C3C" stroke-width="1.5" filter="url(#shadow)"/>
    <text x="180" y="550" font-size="11" fill="#2C3E50" font-weight="bold" text-anchor="middle">SPC 차트</text>
    <text x="180" y="568" font-size="10" fill="#E74C3C" text-anchor="middle">→ 3.3장</text>
  </g>

  <!-- RADIAL SLICE - spatiotemporal analysis -->
  <g opacity="0.85">
    <line x1="490" y1="420" x2="610" y2="470" stroke="#27AE60" stroke-width="1.5" stroke-dasharray="6,3"/>
    <rect x="610" y="450" width="130" height="50" rx="8" fill="#D5F5E3" stroke="#27AE60" stroke-width="1.5" filter="url(#shadow)"/>
    <text x="675" y="468" font-size="11" fill="#2C3E50" font-weight="bold" text-anchor="middle">공간-시간</text>
    <text x="675" y="486" font-size="10" fill="#27AE60" text-anchor="middle">결합 분석</text>
  </g>

  <!-- ===== CUT PLANE INDICATORS ON CUBE ===== -->
  <!-- Horizontal cut (time slice) -->
  <polygon points="295,320 370,285 520,350 440,390" fill="#D6EAF8" fill-opacity="0.35" stroke="#3498DB" stroke-width="1.2" stroke-dasharray="4,3"/>

  <!-- Vertical cut (spatial slice) -->
  <polygon points="340,185 340,465 380,440 380,170" fill="#FADBD8" fill-opacity="0.3" stroke="#E74C3C" stroke-width="1.2" stroke-dasharray="4,3"/>

  <!-- ===== SURROUNDING LABELS ===== -->

  <!-- TOP: 시계열 구조 -->
  <g>
    <rect x="295" y="30" width="220" height="60" rx="10" fill="#FDEDEC" stroke="#E74C3C" stroke-width="1.5" filter="url(#shadow)"/>
    <text x="320" y="55" font-size="20">⏱</text>
    <text x="345" y="55" font-size="12" fill="#E74C3C" font-weight="bold">시계열 구조</text>
    <text x="345" y="75" font-size="10" fill="#7F8C8D">밀리초~월 (5가지 스케일)</text>
    <!-- Arrow down to cube -->
    <line x1="405" y1="90" x2="405" y2="118" stroke="#E74C3C" stroke-width="1.5"/>
    <polygon points="405,120 400,112 410,112" fill="#E74C3C"/>
  </g>

  <!-- RIGHT: 공간 구조 -->
  <g>
    <rect x="720" y="300" width="160" height="60" rx="10" fill="#EBF5FB" stroke="#3498DB" stroke-width="1.5" filter="url(#shadow)"/>
    <text x="740" y="325" font-size="20">📐</text>
    <text x="765" y="325" font-size="12" fill="#3498DB" font-weight="bold">공간 구조</text>
    <text x="740" y="345" font-size="9" fill="#7F8C8D">웨이퍼→필드→다이 (4가지 스케일)</text>
    <!-- Arrow left to cube -->
    <line x1="720" y1="330" x2="590" y2="330" stroke="#3498DB" stroke-width="1.5"/>
    <polygon points="588,330 596,325 596,335" fill="#3498DB"/>
  </g>

  <!-- LEFT: 계층 구조 -->
  <g>
    <rect x="20" y="300" width="170" height="60" rx="10" fill="#EAFAF1" stroke="#27AE60" stroke-width="1.5" filter="url(#shadow)"/>
    <text x="40" y="325" font-size="20">🏗</text>
    <text x="65" y="325" font-size="12" fill="#27AE60" font-weight="bold">계층 구조</text>
    <text x="40" y="345" font-size="8.5" fill="#7F8C8D">팹→장비→챔버→로트→웨이퍼→다이</text>
    <!-- Arrow right to cube -->
    <line x1="190" y1="330" x2="235" y2="330" stroke="#27AE60" stroke-width="1.5"/>
    <polygon points="237,330 229,325 229,335" fill="#27AE60"/>
  </g>

  <!-- ===== KEY MESSAGE (bottom) ===== -->
  <g>
    <rect x="200" y="610" width="500" height="55" rx="12" fill="#F4ECF7" stroke="#8E44AD" stroke-width="2" filter="url(#shadow)"/>
    <text x="450" y="635" font-size="12" fill="#8E44AD" font-weight="bold" text-anchor="middle">⚠ 세 구조를 무시하고 플랫 테이블로 펼치면</text>
    <text x="450" y="655" font-size="12" fill="#8E44AD" font-weight="bold" text-anchor="middle">구조에 담긴 정보가 손실된다</text>
  </g>

  <!-- ===== TITLE ===== -->
  <text x="450" y="22" font-size="15" fill="#2C3E50" font-weight="bold" text-anchor="middle">시공간 결합 데이터 큐브 (시간 × X × Y)</text>

</svg>