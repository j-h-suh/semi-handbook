<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#555" />
        </marker>
        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
        </filter>
    </defs>
    
    <rect width="100%" height="100%" fill="#f9f9f9" />
    <text x="50" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">반도체 Foundation Model 아키텍처</text>
    
    <!-- Layer 1: Pre-training (Data Sources) -->
    <g transform="translate(50, 450)">
        <text x="0" y="-20" font-family="Arial" font-size="16" font-weight="bold" fill="#1565c0">Pre-training Layer (Multi-Fab Data)</text>
        
        <!-- Fabs -->
        <rect x="0" y="0" width="100" height="80" rx="5" fill="#e3f2fd" stroke="#1565c0" stroke-width="2" />
        <text x="50" y="45" text-anchor="middle" font-family="Arial">Fab A</text>
        
        <rect x="120" y="0" width="100" height="80" rx="5" fill="#e3f2fd" stroke="#1565c0" stroke-width="2" />
        <text x="170" y="45" text-anchor="middle" font-family="Arial">Fab B</text>
        
        <rect x="240" y="0" width="100" height="80" rx="5" fill="#e3f2fd" stroke="#1565c0" stroke-width="2" />
        <text x="290" y="45" text-anchor="middle" font-family="Arial">Fab C</text>
        
        <!-- Federated Learning Box (Corrected: Starts at x=0 to include Fab A) -->
        <rect x="0" y="90" width="340" height="40" rx="5" fill="#bbdefb" stroke="#1565c0" stroke-dasharray="5,5" />
        <text x="170" y="115" text-anchor="middle" font-family="Arial" font-weight="bold" fill="#1565c0">Federated Learning (Privacy Preserving)</text>
        
        <!-- Arrows up to Foundation -->
        <line x1="180" y1="90" x2="350" y2="-50" stroke="#283593" stroke-width="3" marker-end="url(#arrow)" />
    </g>
    
    <!-- Layer 2: Foundation Model Core -->
    <g transform="translate(250, 250)">
        <rect x="0" y="0" width="300" height="150" rx="10" fill="#283593" filter="url(#shadow)" />
        <text x="150" y="40" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="white">Foundation Model Core</text>
        <text x="150" y="70" text-anchor="middle" font-family="Arial" font-size="14" fill="#ddd">General Physics / Pattern Knowledge</text>
        <text x="150" y="100" text-anchor="middle" font-family="Arial" font-size="14" fill="#ddd">Cross-Process Understanding</text>
        
        <!-- Arrow up to Fine-tuning -->
        <line x1="150" y1="0" x2="150" y2="-50" stroke="#4caf50" stroke-width="3" marker-end="url(#arrow)" />
    </g>
    
    <!-- Layer 3: Fine-Tuning -->
    <g transform="translate(250, 100)">
        <rect x="0" y="0" width="300" height="80" rx="10" fill="#4caf50" filter="url(#shadow)" />
        <text x="150" y="30" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="white">Fine-Tuning Layer</text>
        <text x="150" y="55" text-anchor="middle" font-family="Arial" font-size="14" fill="#eee">Specific Fab / Equipment Adaptation</text>
        
        <!-- Arrows up to Apps -->
        <line x1="100" y1="0" x2="-10" y2="-40" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow)" />
        <line x1="150" y1="0" x2="150" y2="-40" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow)" />
        <line x1="200" y1="0" x2="310" y2="-40" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow)" />
    </g>
    
    <!-- Layer 4: Applications -->
    <g transform="translate(250, 20)">
        <rect x="-50" y="0" width="80" height="30" rx="5" fill="#ff9800" stroke="none" />
        <text x="-10" y="20" text-anchor="middle" font-family="Arial" font-size="12" fill="white">Virtual Metrology</text>
        
        <rect x="110" y="0" width="80" height="30" rx="5" fill="#ff9800" stroke="none" />
        <text x="150" y="20" text-anchor="middle" font-family="Arial" font-size="12" fill="white">Yield Prediction</text>
        
        <rect x="270" y="0" width="80" height="30" rx="5" fill="#ff9800" stroke="none" />
        <text x="310" y="20" text-anchor="middle" font-family="Arial" font-size="12" fill="white">Anomaly Det.</text>
    </g>
    
    </svg>