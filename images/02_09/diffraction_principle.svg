<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 450" width="600" height="450" font-family="'Apple SD Gothic Neo', 'Nanum Gothic', sans-serif">
  <defs>
    <marker id="arrowYellow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#FFD700"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="#4169E1"/>
    </marker>
    <marker id="arrowRedOut" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="#FF6347"/>
    </marker>
    <linearGradient id="incidentGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#FFD700" stop-opacity="0.3"/>
      <stop offset="100%" stop-color="#FFD700" stop-opacity="0.9"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="600" height="450" fill="#FAFBFF" rx="8"/>

  <!-- Title -->
  <text x="300" y="28" text-anchor="middle" font-size="16" font-weight="bold" fill="#222">DBO 회절 원리 — ±1차 강도 비교</text>

  <!-- ===== Incident Light ===== -->
  <!-- Main beam -->
  <line x1="300" y1="50" x2="300" y2="195" stroke="#FFD700" stroke-width="6" opacity="0.85"/>
  <!-- Arrow head -->
  <polygon points="290,190 300,210 310,190" fill="#FFD700" opacity="0.9"/>
  <!-- Beam glow -->
  <line x1="300" y1="50" x2="300" y2="195" stroke="#FFD700" stroke-width="14" opacity="0.15"/>
  <!-- Label -->
  <text x="300" y="46" text-anchor="middle" font-size="12" font-weight="bold" fill="#B8860B">▼ 입사광 (광대역)</text>

  <!-- ===== Grating structure ===== -->
  <g transform="translate(100, 210)">
    <!-- Substrate base -->
    <rect x="0" y="30" width="400" height="30" fill="#C0C0C0" stroke="#999" stroke-width="0.8" rx="2"/>
    <text x="200" y="52" text-anchor="middle" font-size="9" fill="#666">기판</text>

    <!-- Reference layer grating bars -->
    <rect x="20" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="56" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="92" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="128" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="164" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="200" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="236" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="272" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="308" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>
    <rect x="344" y="16" width="16" height="16" fill="#FF8C00" rx="1" opacity="0.9"/>

    <!-- Current layer grating bars (slightly shifted for asymmetry) -->
    <rect x="24" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="60" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="96" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="132" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="168" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="204" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="240" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="276" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="312" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>
    <rect x="348" y="0" width="16" height="16" fill="#4169E1" rx="1" opacity="0.9"/>

    <!-- Pitch dimension -->
    <line x1="20" y1="-8" x2="56" y2="-8" stroke="#555" stroke-width="0.8"/>
    <line x1="20" y1="-12" x2="20" y2="-4" stroke="#555" stroke-width="0.6"/>
    <line x1="56" y1="-12" x2="56" y2="-4" stroke="#555" stroke-width="0.6"/>
    <text x="38" y="-14" text-anchor="middle" font-size="10" fill="#555" font-weight="bold">P</text>

    <!-- Layer labels -->
    <text x="410" y="10" font-size="9" fill="#4169E1" font-weight="bold">현재 층</text>
    <text x="410" y="28" font-size="9" fill="#FF8C00" font-weight="bold">이전 층</text>
  </g>

  <!-- Label for composite grating -->
  <text x="560" y="225" text-anchor="end" font-size="10" fill="#333" font-weight="bold">합성 격자</text>
  <text x="560" y="238" text-anchor="end" font-size="9" fill="#555">(이전층 + 현재층)</text>

  <!-- ===== Diffracted beams ===== -->

  <!-- +1차 회절광 (right, stronger, thicker) -->
  <line x1="300" y1="210" x2="510" y2="82" stroke="#4169E1" stroke-width="4.5" opacity="0.75"/>
  <polygon points="510,82 498,90 503,78" fill="#4169E1" opacity="0.85"/>
  <!-- Glow -->
  <line x1="300" y1="210" x2="510" y2="82" stroke="#4169E1" stroke-width="12" opacity="0.1"/>

  <!-- +1차 label -->
  <g transform="translate(480, 80)">
    <rect x="-5" y="-14" width="100" height="32" rx="4" fill="#EEF2FF" stroke="#4169E1" stroke-width="0.8" opacity="0.9"/>
    <text x="45" y="0" text-anchor="middle" font-size="11" font-weight="bold" fill="#4169E1">+1차 회절광</text>
    <text x="45" y="14" text-anchor="middle" font-size="10" fill="#4169E1">강도 I₊₁</text>
  </g>

  <!-- -1차 회절광 (left, weaker, thinner) -->
  <line x1="300" y1="210" x2="90" y2="82" stroke="#FF6347" stroke-width="2.5" opacity="0.65"/>
  <polygon points="90,82 98,78 102,89" fill="#FF6347" opacity="0.75"/>
  <!-- Glow -->
  <line x1="300" y1="210" x2="90" y2="82" stroke="#FF6347" stroke-width="10" opacity="0.08"/>

  <!-- -1차 label -->
  <g transform="translate(20, 80)">
    <rect x="-5" y="-14" width="100" height="32" rx="4" fill="#FFF0EE" stroke="#FF6347" stroke-width="0.8" opacity="0.9"/>
    <text x="45" y="0" text-anchor="middle" font-size="11" font-weight="bold" fill="#FF6347">−1차 회절광</text>
    <text x="45" y="14" text-anchor="middle" font-size="10" fill="#FF6347">강도 I₋₁</text>
  </g>

  <!-- 0차 (정반사) -->
  <line x1="300" y1="210" x2="300" y2="100" stroke="#808080" stroke-width="2" opacity="0.5" stroke-dasharray="6,3"/>
  <text x="315" y="95" font-size="9" fill="#808080">0차 (정반사)</text>

  <!-- Angle labels -->
  <!-- +θ arc -->
  <path d="M300,180 A30,30 0 0,1 318,168" fill="none" stroke="#4169E1" stroke-width="1"/>
  <text x="324" y="172" font-size="10" fill="#4169E1">+θ</text>

  <!-- -θ arc -->
  <path d="M300,180 A30,30 0 0,0 282,168" fill="none" stroke="#FF6347" stroke-width="1"/>
  <text x="268" y="172" font-size="10" fill="#FF6347">−θ</text>

  <!-- ===== Detectors ===== -->
  <!-- Detector +1 (right) -->
  <g transform="translate(510, 50)">
    <rect x="0" y="0" width="70" height="40" rx="6" fill="#D8E8FF" stroke="#4169E1" stroke-width="1.5"/>
    <text x="35" y="16" text-anchor="middle" font-size="9" fill="#333" font-weight="bold">검출기</text>
    <text x="35" y="30" text-anchor="middle" font-size="10" fill="#4169E1" font-weight="bold">(+1)</text>
  </g>

  <!-- Detector -1 (left) -->
  <g transform="translate(20, 50)">
    <rect x="0" y="0" width="70" height="40" rx="6" fill="#FFE8E5" stroke="#FF6347" stroke-width="1.5"/>
    <text x="35" y="16" text-anchor="middle" font-size="9" fill="#333" font-weight="bold">검출기</text>
    <text x="35" y="30" text-anchor="middle" font-size="10" fill="#FF6347" font-weight="bold">(−1)</text>
  </g>

  <!-- ===== Bottom: Physics note & equation ===== -->
  <g transform="translate(30, 290)">
    <rect x="0" y="0" width="540" height="85" rx="6" fill="#F5F5EB" stroke="#CCC" stroke-width="1"/>

    <!-- Physics note -->
    <text x="15" y="20" font-size="11" fill="#333">
      <tspan font-weight="bold" fill="#4169E1">격자 대칭</tspan>
      <tspan fill="#555"> → I₊₁ = I₋₁ → Overlay = 0</tspan>
    </text>
    <text x="15" y="40" font-size="11" fill="#333">
      <tspan font-weight="bold" fill="#FF6347">격자 비대칭 (OVL≠0)</tspan>
      <tspan fill="#555"> → I₊₁ ≠ I₋₁ → 강도 차이로 Overlay 추출</tspan>
    </text>

    <!-- Divider -->
    <line x1="15" y1="52" x2="525" y2="52" stroke="#DDD" stroke-width="1"/>

    <!-- Diffraction equation -->
    <text x="15" y="72" font-size="12" fill="#333">
      <tspan font-weight="bold">회절 조건:</tspan>
      <tspan fill="#222" font-style="italic">  sinθ = mλ/P</tspan>
      <tspan fill="#888" font-size="10">  (m = ±1, ±2, ...)</tspan>
    </text>
  </g>

  <!-- Legend bar -->
  <g transform="translate(30, 390)">
    <rect x="0" y="0" width="12" height="12" fill="#FFD700" rx="2"/>
    <text x="16" y="10" font-size="9" fill="#666">입사광</text>
    <rect x="70" y="0" width="12" height="12" fill="#4169E1" rx="2"/>
    <text x="86" y="10" font-size="9" fill="#666">+1차 회절</text>
    <rect x="160" y="0" width="12" height="12" fill="#FF6347" rx="2"/>
    <text x="176" y="10" font-size="9" fill="#666">−1차 회절</text>
    <rect x="250" y="0" width="12" height="12" fill="#808080" rx="2"/>
    <text x="266" y="10" font-size="9" fill="#666">0차 반사</text>
    <rect x="330" y="0" width="12" height="12" fill="#FF8C00" rx="2"/>
    <text x="346" y="10" font-size="9" fill="#666">이전 층</text>
    <rect x="400" y="0" width="12" height="12" fill="#4169E1" rx="2"/>
    <text x="416" y="10" font-size="9" fill="#666">현재 층</text>
  </g>
</svg>