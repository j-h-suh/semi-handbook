<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="600" height="600" viewBox="0 0 600 600">
  <defs>
    <style>
      text { font-family: 'Apple SD Gothic Neo', 'AppleGothic', 'Nanum Gothic', sans-serif; }
    </style>
    <!-- Subtle radial gradient for background -->
    <radialGradient id="bgGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#fafafa;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#f0f0f0;stop-opacity:1"/>
    </radialGradient>
  </defs>

  <!-- Background -->
  <rect width="600" height="600" fill="url(#bgGrad)" rx="12"/>

  <!-- Title -->
  <text x="300" y="35" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">
    Safe Exploration — 점진적 탐색 범위 확대
  </text>

  <!-- Axis labels -->
  <!-- X axis: Dose -->
  <line x1="80" y1="540" x2="520" y2="540" stroke="#aaa" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="300" y="575" text-anchor="middle" font-size="12" fill="#666" font-weight="bold">
    Dose (mJ/cm²)
  </text>
  <!-- X axis ticks -->
  <text x="110" y="558" text-anchor="middle" font-size="9" fill="#888">22.5</text>
  <line x1="110" y1="540" x2="110" y2="545" stroke="#aaa" stroke-width="1"/>
  <text x="205" y="558" text-anchor="middle" font-size="9" fill="#888">23.75</text>
  <line x1="205" y1="540" x2="205" y2="545" stroke="#aaa" stroke-width="1"/>
  <text x="300" y="558" text-anchor="middle" font-size="9" fill="#888">25.0</text>
  <line x1="300" y1="540" x2="300" y2="545" stroke="#aaa" stroke-width="1"/>
  <text x="395" y="558" text-anchor="middle" font-size="9" fill="#888">26.25</text>
  <line x1="395" y1="540" x2="395" y2="545" stroke="#aaa" stroke-width="1"/>
  <text x="490" y="558" text-anchor="middle" font-size="9" fill="#888">27.5</text>
  <line x1="490" y1="540" x2="490" y2="545" stroke="#aaa" stroke-width="1"/>

  <!-- Y axis: Focus -->
  <line x1="80" y1="540" x2="80" y2="60" stroke="#aaa" stroke-width="1.5"/>
  <text x="30" y="300" text-anchor="middle" font-size="12" fill="#666" font-weight="bold"
        transform="rotate(-90, 30, 300)">
    Focus (nm)
  </text>
  <!-- Y axis ticks -->
  <text x="72" y="540" text-anchor="end" font-size="9" fill="#888">-50</text>
  <text x="72" y="420" text-anchor="end" font-size="9" fill="#888">-25</text>
  <text x="72" y="300" text-anchor="end" font-size="9" fill="#888">0</text>
  <text x="72" y="180" text-anchor="end" font-size="9" fill="#888">+25</text>
  <text x="72" y="65" text-anchor="end" font-size="9" fill="#888">+50</text>
  <line x1="75" y1="420" x2="80" y2="420" stroke="#aaa" stroke-width="1"/>
  <line x1="75" y1="300" x2="80" y2="300" stroke="#aaa" stroke-width="1"/>
  <line x1="75" y1="180" x2="80" y2="180" stroke="#aaa" stroke-width="1"/>

  <!-- Hard Bounds: ±10% → Dose 22.5~27.5 (x:110~490), Focus ±50nm (y:60~540) -->
  <rect x="110" y="65" width="380" height="470" fill="none"
        stroke="#e85d5d" stroke-width="2" stroke-dasharray="8,4" rx="8" opacity="0.7"/>
  <text x="495" y="80" text-anchor="start" font-size="10" fill="#e85d5d" font-weight="bold">
    Hard Bounds
  </text>
  <text x="495" y="94" text-anchor="start" font-size="9" fill="#e85d5d">
    (±10%, 절대 한계)
  </text>

  <!-- Stage 3: ±5% → Dose 23.75~26.25 (x:205~395), proportional Focus -->
  <ellipse cx="300" cy="300" rx="95" ry="140" fill="#f39c12" fill-opacity="0.08"
           stroke="#f39c12" stroke-width="2.5" stroke-dasharray="6,3"/>
  <text x="402" y="185" text-anchor="start" font-size="11" fill="#f39c12" font-weight="bold">
    3단계: ±5%
  </text>
  <text x="402" y="200" text-anchor="start" font-size="10" fill="#f39c12">
    (23.75~26.25 mJ)
  </text>
  <text x="402" y="215" text-anchor="start" font-size="10" fill="#f39c12">
    탐색 중... 🔍
  </text>

  <!-- Stage 2: ±2% → Dose 24.5~25.5 (x:252~348) -->
  <ellipse cx="300" cy="300" rx="38" ry="72" fill="#4a90d9" fill-opacity="0.1"
           stroke="#4a90d9" stroke-width="2.5"/>
  <text x="355" y="248" text-anchor="start" font-size="11" fill="#4a90d9" font-weight="bold">
    2단계: ±2%
  </text>
  <text x="355" y="263" text-anchor="start" font-size="10" fill="#4a90d9">
    (24.5~25.5 mJ)
  </text>
  <text x="355" y="278" text-anchor="start" font-size="10" fill="#2ecc71">
    안전 확인 ✅
  </text>

  <!-- Stage 1: ±1% → Dose 24.75~25.25 (x:276~324) -->
  <ellipse cx="300" cy="300" rx="19" ry="36" fill="#2ecc71" fill-opacity="0.15"
           stroke="#2ecc71" stroke-width="2.5"/>
  <text x="330" y="318" text-anchor="start" font-size="11" fill="#2ecc71" font-weight="bold">
    1단계: ±1%
  </text>
  <text x="330" y="333" text-anchor="start" font-size="10" fill="#2ecc71">
    (24.75~25.25 mJ)
  </text>
  <text x="330" y="348" text-anchor="start" font-size="10" fill="#2ecc71">
    안전 확인 ✅
  </text>

  <!-- Center point -->
  <circle cx="300" cy="300" r="6" fill="#333"/>
  <circle cx="300" cy="300" r="3" fill="white"/>
  <text x="300" y="370" text-anchor="middle" font-size="11" fill="#333" font-weight="bold">
    현재 최적 레시피
  </text>
  <text x="300" y="386" text-anchor="middle" font-size="10" fill="#555">
    Dose=25 mJ, Focus=0 nm
  </text>

  <!-- Expansion arrows (concentric, showing growth direction) -->
  <!-- Arrow from stage1 outward -->
  <line x1="300" y1="264" x2="300" y2="228" stroke="#4a90d9" stroke-width="1.5"
        marker-end="url(#arrowBlue)"/>
  <line x1="300" y1="228" x2="300" y2="160" stroke="#f39c12" stroke-width="1.5"
        marker-end="url(#arrowOrange)"/>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#aaa"/>
    </marker>
    <marker id="arrowBlue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#4a90d9"/>
    </marker>
    <marker id="arrowOrange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#f39c12"/>
    </marker>
  </defs>

  <!-- Bottom annotation box -->
  <rect x="90" y="460" width="420" height="70" fill="white" fill-opacity="0.85"
        stroke="#ddd" stroke-width="1" rx="8"/>
  <text x="110" y="480" font-size="10" fill="#555">
    💡 Shadow → Full Auto 로드맵과 동일 철학
  </text>
  <text x="110" y="496" font-size="10" fill="#555">
    📋 각 단계에서 안전 확인 후 다음 단계로 확대
  </text>
  <text x="110" y="512" font-size="10" fill="#555">
    🔗 4.4장 신뢰 구축 로드맵 참조
  </text>
  <text x="110" y="528" font-size="10" fill="#e85d5d">
    ⚠️ Hard Bounds = 물리적·규격 한계 (절대 넘지 않음)
  </text>

  <!-- Spec Limit indicator (CD spec boundary shown as dashed red ellipse slightly inside hard bounds) -->
  <rect x="135" y="90" width="330" height="420" fill="none"
        stroke="#e85d5d" stroke-width="1.2" stroke-dasharray="4,3" rx="6" opacity="0.4"/>
  <text x="140" y="108" font-size="9" fill="#e85d5d" opacity="0.6">
    Spec Limit (CD 규격 경계)
  </text>

</svg>